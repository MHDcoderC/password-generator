<!doctype html>
<html lang="fa" dir="rtl" class="auto-dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#1e40af" />
    <link rel="manifest" href="./manifest.json" />
    <link rel="icon" href="./icon-192x192.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700&display=swap" rel="stylesheet" />
    <title>سازنده پسورد امن</title>
    <link rel="stylesheet" href="./src/output.css" />
  </head>
  <body class="auto-dark bg-slate-900 text-white min-h-screen">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 z-50 flex items-center justify-center bg-slate-900">
      <div class="text-center">
        <div class="mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-4 border-blue-500 border-t-transparent"></div>
        <div class="text-blue-200">در حال بارگذاری...</div>
      </div>
    </div>

    <!-- Background Particles -->
    <div id="particles" class="pointer-events-none fixed inset-0 -z-10"></div>

    <main class="relative z-10 mx-auto max-w-3xl px-6 py-8">
      <div class="mb-8 text-center">
        <h1 class="mb-2 text-3xl font-bold text-shadow-lg">سازنده پسورد امن</h1>
        <p class="text-blue-200">رمزهای عبور قوی و منحصر به فرد بسازید</p>
        <a href="#generator" class="mt-4 inline-block rounded-lg bg-blue-600 px-4 py-2 btn-hover">شروع استفاده</a>
      </div>

      <section id="generator" class="glass rounded-2xl p-6 shadow-2xl">
        <form id="passwordForm" class="space-y-6">
          <!-- Name -->
          <div>
            <label for="passwordName" class="mb-2 block text-sm text-gray-300">نام رمز (اختیاری)</label>
            <input id="passwordName" type="text" class="w-full rounded-lg bg-white/10 p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" placeholder="مثلاً حساب ایمیل" />
          </div>

          <!-- Difficulty -->
          <div class="grid grid-cols-2 gap-3">
            <div>
              <label for="difficulty" class="mb-2 block text-sm text-gray-300">درجه سختی</label>
              <select id="difficulty" class="w-full rounded-lg bg-white/10 p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                <option value="easy">ساده</option>
                <option value="medium">متوسط</option>
                <option value="hard">سخت</option>
                <option value="custom" selected>دلخواه</option>
              </select>
            </div>

            <!-- Length -->
            <div>
              <label for="length" class="mb-2 block text-sm text-gray-300">طول پسورد: <span id="lengthValue" class="font-mono">12</span> کاراکتر</label>
              <input id="length" type="range" min="8" max="50" value="12" class="slider w-full" />
            </div>
          </div>

          <!-- Options -->
          <button type="button" id="advancedToggle" class="w-full rounded-lg border border-white/10 px-4 py-2 text-blue-300 hover:text-blue-300">تنظیمات پیشرفته</button>
          <div id="advancedSection" class="hidden space-y-4">
            <div class="grid grid-cols-2 gap-3">
              <label class="inline-flex items-center gap-2">
                <input id="uppercase" type="checkbox" class="h-5 w-5" checked />
                <span>حروف بزرگ (A-Z)</span>
              </label>
              <label class="inline-flex items-center gap-2">
                <input id="lowercase" type="checkbox" class="h-5 w-5" checked />
                <span>حروف کوچک (a-z)</span>
              </label>
              <label class="inline-flex items-center gap-2">
                <input id="numbers" type="checkbox" class="h-5 w-5" checked />
                <span>اعداد (0-9)</span>
              </label>
              <label class="inline-flex items-center gap-2">
                <input id="symbols" type="checkbox" class="h-5 w-5" />
                <span>نمادها (!@#$...)</span>
              </label>
            </div>
            <div id="symbolsInfo" class="rounded-lg bg-white/5 p-3 text-sm text-gray-300">
              <div class="mb-1 font-medium">نمادهای مجاز:</div>
              <code class="font-mono">! @ # $ % ^ &amp; * ( ) _ + - = [ ] { } | ; : , . &lt; &gt; ?</code>
            </div>
          </div>

          <!-- Strength (main form display only uses #strengthIndicator) -->
          <div class="rounded-lg bg-white/5 p-3">
            <div class="mb-2 flex items-center justify-between">
              <span class="text-sm text-gray-300">قدرت رمز:</span>
              <div id="strengthIndicator" class="text-sm text-gray-300">
                <span class="mr-1 h-2 w-2 rounded-full bg-yellow-500"></span>
                متوسط
              </div>
            </div>
          </div>

          <!-- Actions -->
          <div class="flex items-center justify-between gap-3">
            <button id="generateBtn" type="submit" class="btn-hover inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-3">
              <span id="btnText">ساخت پسورد جدید</span>
              <svg id="btnLoader" class="hidden h-5 w-5 animate-spin text-white" viewBox="0 0 24 24" fill="none">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
              </svg>
            </button>
            <button id="historyBtn" type="button" class="rounded-lg border border-white/10 px-4 py-3 text-blue-300 hover:text-blue-300">تاریخچه</button>
          </div>
        </form>
      </section>
    </main>

    <!-- Password Modal -->
    <div id="passwordModal" class="fixed inset-0 z-50 hidden items-center justify-center backdrop-blur-xl">
      <div class="mx-auto w-full max-w-md rounded-2xl bg-slate-800 p-6 shadow-lg">
        <div class="mb-3 flex items-center justify-between">
          <h2 class="text-xl font-medium">پسورد شما ساخته شد!</h2>
          <button id="closeModalBtn" class="text-gray-400 hover:text-blue-300">✕</button>
        </div>
        <p class="mb-3 text-sm text-gray-300">رمز عبور شما با موفقیت ساخته شد</p>
        <textarea id="generatedPassword" class="mb-3 w-full rounded-lg bg-white/10 p-3 font-mono" rows="3" readonly></textarea>
        <div class="mb-4 flex items-center justify-between text-sm text-gray-300">
          <span>قدرت: <span id="passwordStrength">-</span></span>
          <div class="h-2 w-32 rounded-full bg-white/10"><div id="passwordStrengthBar" class="h-2 w-1/2 rounded-full bg-yellow-500"></div></div>
        </div>
        <div class="flex items-center justify-between gap-2">
          <button id="copyBtn" class="btn-hover rounded-lg bg-green-600 px-4 py-2">کپی</button>
          <button id="regenerateBtn" class="btn-hover rounded-lg bg-blue-500 px-4 py-2">تولید مجدد</button>
          <button id="saveBtn" class="btn-hover rounded-lg bg-white/10 px-4 py-2">ذخیره</button>
        </div>
      </div>
    </div>

    <!-- History Modal -->
    <div id="historyModal" class="fixed inset-0 z-50 hidden items-center justify-center backdrop-blur-xl">
      <div class="mx-auto max-h-96 w-full max-w-md overflow-y-auto rounded-2xl bg-slate-800 p-6 shadow-lg">
        <div class="mb-3 flex items-center justify-between">
          <h2 class="text-xl font-medium">تاریخچه رمزها</h2>
          <div class="flex items-center gap-2">
            <button id="clearHistoryBtn" class="rounded-lg bg-red-600 px-3 py-2 text-sm">پاک کردن</button>
            <button id="closeHistoryBtn" class="text-gray-400 hover:text-blue-300">✕</button>
          </div>
        </div>
        <div id="historyList" class="space-y-4"></div>
      </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="pointer-events-none fixed bottom-4 left-4 z-50 hidden">
      <div class="rounded-lg bg-green-600 px-4 py-2 text-white shadow-lg">
        <span id="toastMessage">عملیات با موفقیت انجام شد</span>
      </div>
    </div>

    <script src="./src/app.js"></script>
  </body>
  </html>